//-----------------------------------------------------------------------------
// ステージ管理クラス
//-----------------------------------------------------------------------------
#include "StageManager.h"
#include "Sound.h"

//-----------------------------------------------------------------------------
// コンストラクタ
//-----------------------------------------------------------------------------
StageManager::StageManager()
{
	// 処理なし
}

//-----------------------------------------------------------------------------
// デストラクタ
//-----------------------------------------------------------------------------
StageManager::~StageManager()
{
	// 処理なし
}

//-----------------------------------------------------------------------------
// 初期化
//-----------------------------------------------------------------------------
void StageManager::Init()
{
	m_nowStageNum = 1;
	m_alpha = 255;

	m_isNext = false;
	m_isChange = false;
}

//-----------------------------------------------------------------------------
// 更新
//-----------------------------------------------------------------------------
void StageManager::Update()
{
	if (m_isChange)
	{
		m_isChange = false;
	}

	if (m_isNext)
	{
		m_alpha += 5;
		if (m_alpha >= 255)
		{
			m_nowStageNum++;
			m_isNext = false;
			m_isChange = true;
		}
	}
	else
	{
		if (m_alpha > 0)
		{
			m_alpha -= 5;
		}
	}

	if (m_nowStageNum > 12)
	{
		m_nowStageNum = 1;
	}
}

//-----------------------------------------------------------------------------
// 描画
//-----------------------------------------------------------------------------
void StageManager::Draw()
{
	SetDrawBlendMode(DX_BLENDMODE_ALPHA, m_alpha);
	DrawBox(0, 0, 1920, 1080, GetColor(0, 0, 0), TRUE);
	SetDrawBlendMode(DX_BLENDMODE_NOBLEND, 255);
}
